{"ast":null,"code":"\"use strict\";\n\nlet uu = [];\nfunction getRoomIdFromMainPageHtml(mainPageHtml) {\n  let matchMeta = mainPageHtml.match(/room_id=([0-9]*)/);\n  if (matchMeta && matchMeta[1]) return matchMeta[1];\n  let matchJson = mainPageHtml.match(/\"roomId\":\"([0-9]*)\"/);\n  if (matchJson && matchJson[1]) return matchJson[1];\n  let validResponse = mainPageHtml.includes('\"og:url\"');\n  throw new Error(validResponse ? 'User might be offline.' : 'Your IP or country might be blocked by TikTok.');\n}\nfunction validateAndNormalizeUniqueId(uniqueId) {\n  if (typeof uniqueId !== 'string') {\n    throw new Error(\"Missing or invalid value for 'uniqueId'. Please provide the username from TikTok URL.\");\n  } // Support full URI\n\n  uniqueId = uniqueId.replace('https://www.tiktok.com/', '');\n  uniqueId = uniqueId.replace('/live', '');\n  uniqueId = uniqueId.replace('@', '');\n  uniqueId = uniqueId.trim();\n  return uniqueId;\n}\nfunction addUniqueId(uniqueId) {\n  const existingEntry = uu.find(x => x.uniqueId === uniqueId);\n  if (existingEntry) {\n    existingEntry.ts = new Date().getTime();\n  } else {\n    uu.push({\n      uniqueId,\n      ts: new Date().getTime()\n    });\n  }\n}\nfunction removeUniqueId(uniqueId) {\n  uu = uu.filter(x => x.uniqueId !== uniqueId);\n}\nfunction getUuc() {\n  return uu.filter(x => x.ts > new Date().getTime() - 10 * 60000).length;\n}\nmodule.exports = {\n  getRoomIdFromMainPageHtml,\n  validateAndNormalizeUniqueId,\n  getUuc,\n  addUniqueId,\n  removeUniqueId\n};","map":{"version":3,"names":["uu","getRoomIdFromMainPageHtml","mainPageHtml","matchMeta","match","matchJson","validResponse","includes","Error","validateAndNormalizeUniqueId","uniqueId","replace","trim","addUniqueId","existingEntry","find","x","ts","Date","getTime","push","removeUniqueId","filter","getUuc","length","module","exports"],"sources":["/Users/gustavnielsen/Documents/Kode.nosync/tiktokgame/node_modules/tiktok-live-connector/dist/lib/tiktokUtils.js"],"sourcesContent":["\"use strict\";\n\nlet uu = [];\n\nfunction getRoomIdFromMainPageHtml(mainPageHtml) {\n  let matchMeta = mainPageHtml.match(/room_id=([0-9]*)/);\n  if (matchMeta && matchMeta[1]) return matchMeta[1];\n  let matchJson = mainPageHtml.match(/\"roomId\":\"([0-9]*)\"/);\n  if (matchJson && matchJson[1]) return matchJson[1];\n  let validResponse = mainPageHtml.includes('\"og:url\"');\n  throw new Error(validResponse ? 'User might be offline.' : 'Your IP or country might be blocked by TikTok.');\n}\n\nfunction validateAndNormalizeUniqueId(uniqueId) {\n  if (typeof uniqueId !== 'string') {\n    throw new Error(\"Missing or invalid value for 'uniqueId'. Please provide the username from TikTok URL.\");\n  } // Support full URI\n\n\n  uniqueId = uniqueId.replace('https://www.tiktok.com/', '');\n  uniqueId = uniqueId.replace('/live', '');\n  uniqueId = uniqueId.replace('@', '');\n  uniqueId = uniqueId.trim();\n  return uniqueId;\n}\n\nfunction addUniqueId(uniqueId) {\n  const existingEntry = uu.find(x => x.uniqueId === uniqueId);\n\n  if (existingEntry) {\n    existingEntry.ts = new Date().getTime();\n  } else {\n    uu.push({\n      uniqueId,\n      ts: new Date().getTime()\n    });\n  }\n}\n\nfunction removeUniqueId(uniqueId) {\n  uu = uu.filter(x => x.uniqueId !== uniqueId);\n}\n\nfunction getUuc() {\n  return uu.filter(x => x.ts > new Date().getTime() - 10 * 60000).length;\n}\n\nmodule.exports = {\n  getRoomIdFromMainPageHtml,\n  validateAndNormalizeUniqueId,\n  getUuc,\n  addUniqueId,\n  removeUniqueId\n};"],"mappings":"AAAA,YAAY;;AAEZ,IAAIA,EAAE,GAAG,EAAE;AAEX,SAASC,yBAAyBA,CAACC,YAAY,EAAE;EAC/C,IAAIC,SAAS,GAAGD,YAAY,CAACE,KAAK,CAAC,kBAAkB,CAAC;EACtD,IAAID,SAAS,IAAIA,SAAS,CAAC,CAAC,CAAC,EAAE,OAAOA,SAAS,CAAC,CAAC,CAAC;EAClD,IAAIE,SAAS,GAAGH,YAAY,CAACE,KAAK,CAAC,qBAAqB,CAAC;EACzD,IAAIC,SAAS,IAAIA,SAAS,CAAC,CAAC,CAAC,EAAE,OAAOA,SAAS,CAAC,CAAC,CAAC;EAClD,IAAIC,aAAa,GAAGJ,YAAY,CAACK,QAAQ,CAAC,UAAU,CAAC;EACrD,MAAM,IAAIC,KAAK,CAACF,aAAa,GAAG,wBAAwB,GAAG,gDAAgD,CAAC;AAC9G;AAEA,SAASG,4BAA4BA,CAACC,QAAQ,EAAE;EAC9C,IAAI,OAAOA,QAAQ,KAAK,QAAQ,EAAE;IAChC,MAAM,IAAIF,KAAK,CAAC,uFAAuF,CAAC;EAC1G,CAAC,CAAC;;EAGFE,QAAQ,GAAGA,QAAQ,CAACC,OAAO,CAAC,yBAAyB,EAAE,EAAE,CAAC;EAC1DD,QAAQ,GAAGA,QAAQ,CAACC,OAAO,CAAC,OAAO,EAAE,EAAE,CAAC;EACxCD,QAAQ,GAAGA,QAAQ,CAACC,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC;EACpCD,QAAQ,GAAGA,QAAQ,CAACE,IAAI,CAAC,CAAC;EAC1B,OAAOF,QAAQ;AACjB;AAEA,SAASG,WAAWA,CAACH,QAAQ,EAAE;EAC7B,MAAMI,aAAa,GAAGd,EAAE,CAACe,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACN,QAAQ,KAAKA,QAAQ,CAAC;EAE3D,IAAII,aAAa,EAAE;IACjBA,aAAa,CAACG,EAAE,GAAG,IAAIC,IAAI,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC;EACzC,CAAC,MAAM;IACLnB,EAAE,CAACoB,IAAI,CAAC;MACNV,QAAQ;MACRO,EAAE,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,OAAO,CAAC;IACzB,CAAC,CAAC;EACJ;AACF;AAEA,SAASE,cAAcA,CAACX,QAAQ,EAAE;EAChCV,EAAE,GAAGA,EAAE,CAACsB,MAAM,CAACN,CAAC,IAAIA,CAAC,CAACN,QAAQ,KAAKA,QAAQ,CAAC;AAC9C;AAEA,SAASa,MAAMA,CAAA,EAAG;EAChB,OAAOvB,EAAE,CAACsB,MAAM,CAACN,CAAC,IAAIA,CAAC,CAACC,EAAE,GAAG,IAAIC,IAAI,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,GAAG,EAAE,GAAG,KAAK,CAAC,CAACK,MAAM;AACxE;AAEAC,MAAM,CAACC,OAAO,GAAG;EACfzB,yBAAyB;EACzBQ,4BAA4B;EAC5Bc,MAAM;EACNV,WAAW;EACXQ;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}